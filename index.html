<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>NHë†í˜‘ì€í–‰</title>
  <meta name="theme-color" content="#ffffff" />
  <style>
    * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
    html, body { margin:0; padding:0; height:100%; background:#f6f6f6;
      font-family:-apple-system,BlinkMacSystemFont,"Apple SD Gothic Neo","Noto Sans KR","Segoe UI",sans-serif; color:#222; }

    /* ====== View ì „í™˜ ====== */
    .view { position:fixed; inset:0; background:#fff; overflow-y:auto;
      transform:translateX(100%); transition:transform .35s ease; }
    #homeView { transform:translateX(0); }
    .view.active { transform:translateX(0)!important; }
    .view.hiddenLeft { transform:translateX(-100%); }

    /* ====== í™ˆ ìƒë‹¨ ë°” ====== */
    .topbar { background:#fff; padding:10px 12px 6px; border-bottom:1px solid #eee; }
    .top-row { display:flex; align-items:center; justify-content:space-between; }
    .greeting { font-size:22px; font-weight:800; }
    .right-icons { display:flex; gap:8px; }
    .icon-btn { width:36px; height:36px; border-radius:18px; background:#f1f3f5; display:flex; align-items:center; justify-content:center; font-size:18px; }

    .banner { margin:10px 0 6px; background:#fff; border:1px solid #eef0f3; border-radius:12px; padding:14px 12px; display:flex; align-items:center; gap:10px; }
    .banner .emoji { font-size:22px; }
    .banner .msg { font-size:14px; line-height:1.4; color:#333; }
    .banner .msg b { color:#0a7c2f; }

    /* ì„¹ì…˜ í—¤ë” */
    .section-header { background:#fff; border-top:1px solid #eee; border-bottom:1px solid #eee; padding:12px; display:flex; align-items:center; justify-content:space-between; }
    .section-title { font-size:18px; font-weight:800; }
    .header-actions { display:flex; gap:12px; }
    .link-sm { font-size:13px; color:#6563ff; }

    /* ê³„ì¢Œ ì¹´ë“œ */
    .section { padding:14px 12px 20px; }
    .card {
      background:#fff; border-radius:14px; box-shadow:0 1px 4px rgba(0,0,0,.06);
      padding:16px; margin:10px 4px; cursor:pointer;
    }
    .card:active { transform:scale(.998); }
    .acct-title { font-size:16px; font-weight:700; margin-bottom:6px; }
    .acct-num { font-size:14px; color:#888; }
    .btn-row { display:flex; gap:10px; margin-top:14px; }
    .action-btn { flex:1; height:40px; border:0; border-radius:10px; background:#f1f1f5; font-weight:700; color:#333; }

    /* ë‚´ ëª¨ì„ ë°°ë„ˆ */
    .group-card { background:#fff; border-radius:14px; padding:16px; box-shadow:0 1px 4px rgba(0,0,0,.06); }
    .group-title { font-size:15px; color:#555; margin-bottom:10px; }
    .group-box { background:#f6fbf8; border:1px solid #e3f2ea; border-radius:12px; padding:14px; display:flex; align-items:center; justify-content:space-between; }
    .pill-btn { background:linear-gradient(90deg,#1fb37b,#2d8eff); color:#fff; border:0; padding:12px 18px; border-radius:22px; font-weight:800; }

    /* í•˜ë‹¨ íƒ­ */
    .bottom-tabs { position:sticky; bottom:0; background:#fff; border-top:1px solid #eee; display:flex; justify-content:space-around; padding:10px 6px calc(env(safe-area-inset-bottom) + 6px); }
    .tab { display:flex; flex-direction:column; align-items:center; gap:6px; font-size:11.8px; color:#777; }
    .tab .circle { width:28px; height:28px; border-radius:14px; background:#f2f2f2; display:flex; align-items:center; justify-content:center; font-size:14px; }
    .tab.active { color:#0a7c2f; }
    .tab.active .circle { background:#e8f5ee; }

    /* ====== ê±°ë˜ë‚´ì—­ ====== */
    .appbar { position:sticky; top:0; z-index:5; background:#fff; border-bottom:1px solid #eee; height:56px; display:flex; align-items:center; justify-content:center; }
    .appbar .back { position:absolute; left:6px; top:0; height:56px; width:56px; border:0; background:none; font-size:22px; }
    .appbar h1 { font-size:18px; font-weight:700; }

    .summary { background:#fff; border-bottom:1px solid #eee; padding:12px 16px; }
    .sum-row { display:flex; align-items:center; justify-content:space-between; gap:10px; }
    .bankblock { min-width:0; }
    .bankline { font-size:15px; font-weight:700; }
    .acctline { font-size:13px; color:#777; margin-top:2px; }
    .filter-btn { border:0; background:#f1f3f5; width:40px; height:40px; border-radius:10px; font-size:18px; }

    .filterline { font-size:12px; color:#666; margin-top:10px; }

    .tx-list { margin-top:8px; }
    .tx-item { background:#fff; padding:16px; border-bottom:1px solid #f0f0f0; }
    .tx-date { font-size:12.5px; color:#8a8a8a; margin-bottom:6px; }
    .tx-row { display:flex; align-items:flex-start; justify-content:space-between; gap:10px; }
    .tx-name { font-size:15.5px; font-weight:700; color:#111; }
    .tx-amount { text-align:right; }
    .tx-amt { font-size:18px; font-weight:800; }
    .withdraw { color:#d32f2f; }
    .tx-bal { margin-top:2px; font-size:12.5px; color:#8a8a8a; }

    /* ====== ê¸°ê°„/ì •ë ¬/êµ¬ë¶„ ëª¨ë‹¬ ====== */
    .sheet { position:fixed; left:0; right:0; bottom:-100%; background:#fff; border-top-left-radius:16px; border-top-right-radius:16px; box-shadow:0 -8px 24px rgba(0,0,0,.18); transition:bottom .28s ease; z-index:30; }
    .sheet.show { bottom:0; }
    .sheet-head { padding:14px 16px; border-bottom:1px solid #eee; display:flex; align-items:center; justify-content:space-between; }
    .sheet-title { font-size:16px; font-weight:800; }
    .sheet-close { border:0; background:none; font-size:22px; }
    .sheet-body { padding:14px 16px 22px; }
    .sheet-sec { margin-bottom:14px; }
    .sec-label { font-size:13px; color:#666; margin:4px 0 8px; }
    .grid-4 { display:grid; grid-template-columns:repeat(4,1fr); gap:8px; }
    .grid-3 { display:grid; grid-template-columns:repeat(3,1fr); gap:8px; }
    .grid-2 { display:grid; grid-template-columns:repeat(2,1fr); gap:8px; }
    .opt { padding:12px 8px; border:1px solid #e0e0e0; border-radius:10px; background:#fff; font-size:14px; text-align:center; }
    .opt.selected { border:2px solid #0a7c2f; background:#f0fff6; font-weight:800; color:#0a7c2f; }
    .apply { margin-top:8px; width:100%; background:#0a7c2f; color:#fff; border:0; border-radius:12px; padding:14px; font-size:16px; font-weight:800; }

    .safe { height:16px; }

    /* í•œë„ì œí•œê³„ì¢Œ ë°°ì§€ */
    .pill { display:inline-flex; align-items:center; padding:4px 8px; border-radius:14px; font-size:12px; margin-bottom:6px; }
    .pill-gray { background:#f1f3f5; color:#666; border:1px solid #e5e7ea; }
  </style>
</head>
<body>

  <!-- ========================= í™ˆ ========================= -->
  <section id="homeView" class="view">
    <div class="topbar">
      <div class="top-row">
        <div class="greeting">ì£¼ì„±ê´‘ë‹˜</div>
        <div class="right-icons">
          <div class="icon-btn">ğŸ””</div>
          <div class="icon-btn">â˜°</div>
        </div>
      </div>

      <div class="banner">
        <div class="emoji">ğŸ¥</div>
        <div class="msg">100% ë‹¹ì²¨ <b>ì˜¬ì›ë£°ë ›!</b> ë§¤ì¼ ìµœëŒ€ 5ë§ŒP<br/>ì˜¤ëŠ˜ì€ ì–¼ë§ˆ? <b>ì§€ê¸ˆ í™•ì¸í•˜ì„¸ìš”!</b></div>
      </div>
    </div>

    <div class="section-header">
      <div class="section-title">ë‚´ ê³„ì¢Œ</div>
      <div class="header-actions">
        <div class="link-sm">ê³„ì¢Œë“±ë¡/ê´€ë¦¬</div>
        <div class="link-sm">ì „ì²´ê³„ì¢Œì¡°íšŒ</div>
      </div>
    </div>

    <div class="section">
      <div id="accountCard" class="card" role="button" aria-label="ê³„ì¢Œ ë³´ê¸°">
        <span class="pill pill-gray">í•œë„ì œí•œê³„ì¢Œ</span>
        <div class="acct-title">NHí˜ì´ëª¨ì•„í†µì¥(ë¹„ëŒ€ë©´ì‹¤ëª…í™•ì¸)</div>
        <div class="acct-num">302-1934-2120-51</div>
        <div class="btn-row" aria-hidden="true">
          <button class="action-btn" type="button">ATMì¶œê¸ˆ</button>
          <button class="action-btn" type="button">ì±„ìš°ê¸°</button>
          <button class="action-btn" type="button">ë³´ë‚´ê¸°</button>
        </div>
      </div>
    </div>

    <div class="section-header">
      <div class="section-title">ë‚´ ëª¨ì„</div>
      <div></div>
    </div>
    <div class="section">
      <div class="group-card">
        <div class="group-title">í•¨ê»˜í•˜ëŠ” ìˆœê°„ì´ ë” ì‰½ê³  ì¦ê±°ì›Œì§€ëŠ”</div>
        <div class="group-box">
          <div>NHì˜¬ì›ëª¨ì„ì„œë¹„ìŠ¤ì™€ í•¨ê»˜í•´ìš”</div>
          <button class="pill-btn" type="button">ë‚´ ìì‚° í™•ì¸ âŒ„</button>
        </div>
      </div>
    </div>

    <nav class="bottom-tabs">
      <div class="tab active">
        <div class="circle">ğŸ </div><div>í™ˆ</div>
      </div>
      <div class="tab"><div class="circle">ğŸ›ï¸</div><div>ìƒí’ˆëª°</div></div>
      <div class="tab"><div class="circle">ğŸ‘¤</div><div>MY</div></div>
      <div class="tab"><div class="circle">ğŸ…¿ï¸</div><div>í¬ì¸íŠ¸ìŒ“ê¸°</div></div>
      <div class="tab"><div class="circle">ğŸ</div><div>ìƒí™œí˜œíƒ</div></div>
    </nav>
  </section>

  <!-- ====================== ê±°ë˜ë‚´ì—­ì¡°íšŒ ===================== -->
  <section id="txView" class="view">
    <div class="appbar">
      <button class="back" aria-label="ë’¤ë¡œ" onclick="goHome()">â€¹</button>
      <h1>ê±°ë˜ë‚´ì—­ì¡°íšŒ</h1>
    </div>

    <div class="summary">
      <div class="sum-row">
        <div class="bankblock">
          <div class="bankline">NHë†í˜‘ 302-1934-2120-51</div>
          <div class="acctline">NHí˜ì´ëª¨ì•„í†µì¥(ë¹„ëŒ€ë©´ì‹¤ëª…í™•ì¸)</div>
        </div>
        <button id="openFilter" class="filter-btn" aria-label="ê¸°ê°„ ì„¤ì •">âš™ï¸</button>
      </div>
      <div id="filterInfo" class="filterline">2024.11.08 ~ 2025.11.07 Â· ì „ì²´ Â· ìµœì‹ ìˆœ</div>
    </div>

    <div id="txList" class="tx-list"></div>
    <div class="safe"></div>
  </section>

  <!-- ====== ê¸°ê°„/ì •ë ¬/êµ¬ë¶„ ë°”í…€ì‹œíŠ¸ ====== -->
  <div id="sheet" class="sheet" role="dialog" aria-modal="true" aria-labelledby="sheetTitle">
    <div class="sheet-head">
      <div id="sheetTitle" class="sheet-title">ì¡°íšŒê¸°ê°„ ì„ íƒ</div>
      <button class="sheet-close" id="closeSheet" aria-label="ë‹«ê¸°">Ã—</button>
    </div>
    <div class="sheet-body">
      <!-- ê¸°ê°„ -->
      <div class="sheet-sec">
        <div class="sec-label">ê¸°ê°„</div>
        <div class="grid-4">
          <button class="opt opt-period selected" data-period="1week">1ì£¼ì¼</button>
          <button class="opt opt-period" data-period="1month">1ê°œì›”</button>
          <button class="opt opt-period" data-period="3months">3ê°œì›”</button>
          <button class="opt opt-period" data-period="1year">1ë…„</button>
        </div>
      </div>
      <!-- ì •ë ¬ -->
      <div class="sheet-sec">
        <div class="sec-label">ì •ë ¬</div>
        <div class="grid-2">
          <button class="opt opt-sort selected" data-sort="latest">ìµœì‹ ìˆœ</button>
          <button class="opt opt-sort" data-sort="oldest">ê³¼ê±°ìˆœ</button>
        </div>
      </div>
      <!-- êµ¬ë¶„ -->
      <div class="sheet-sec">
        <div class="sec-label">êµ¬ë¶„</div>
        <div class="grid-3">
          <button class="opt opt-type selected" data-type="all">ì „ì²´</button>
          <button class="opt opt-type" data-type="deposit">ì…ê¸ˆ</button>
          <button class="opt opt-type" data-type="withdraw">ì¶œê¸ˆ</button>
        </div>
      </div>

      <button class="apply" id="applyFilter">ì¡°íšŒ</button>
    </div>
    <div class="safe"></div>
  </div>

  <script>
    /* ======= í™”ë©´ ì „í™˜ ======= */
    const homeView = document.getElementById('homeView');
    const txView   = document.getElementById('txView');
    const card     = document.getElementById('accountCard');

    card.addEventListener('click', (e) => {
      if (e.target.classList.contains('action-btn')) return; // ë²„íŠ¼ì€ ì „í™˜ X
      openTx();
    });
    function openTx() { homeView.classList.add('hiddenLeft'); txView.classList.add('active'); }
    function goHome() { txView.classList.remove('active'); homeView.classList.remove('hiddenLeft'); }

    /* ======= ê±°ë˜ ë°ì´í„° / í•„í„° ======= */
    const allTransactions = [
      { type:'withdraw', name:'ì£¼ì„±ê´‘',  amount:200000, date:'2025-11-06', time:'14:25:05', balance:'0' },
      { type:'withdraw', name:'ì´í¬ì§„',  amount:200000, date:'2025-11-04', time:'21:22:32', balance:'0' },
      { type:'withdraw', name:'ì´í¬ì§„',  amount:200000, date:'2025-11-03', time:'22:00:55', balance:'0' },
      { type:'withdraw', name:'ì´í¬ì§„',  amount:200000, date:'2025-10-31', time:'20:22:07', balance:'0' },
      { type:'withdraw', name:'ì´í¬ì§„',  amount:200000, date:'2025-10-30', time:'20:25:15', balance:'0' },
      { type:'withdraw', name:'ì£¼ì„±ê´‘',  amount:10000,  date:'2025-10-30', time:'10:14:33', balance:'90,000' },
      { type:'withdraw', name:'ì£¼ì„±ê´‘',  amount:3620400,date:'2025-10-24', time:'10:18:31', balance:'0' },
      { type:'withdraw', name:'ì´í¬ì§„',  amount:30000,  date:'2025-10-10', time:'19:34:52', balance:'0' },
    ];

    const filterInfo = document.getElementById('filterInfo');
    const txListEl   = document.getElementById('txList');

    // >>> ì¶”ê°€: type(êµ¬ë¶„) í¬í•¨
    let filterState = { period:'1week', sort:'latest', type:'all' };

    function formatAmt(n){ return n.toLocaleString('ko-KR'); }
    function fmtDate(d){
      const y=d.getFullYear(), m=String(d.getMonth()+1).padStart(2,'0'), dd=String(d.getDate()).padStart(2,'0');
      return `${y}.${m}.${dd}`;
    }
    function periodRange(period){
      const end = new Date('2025-11-07T23:59:59'); // ê¸°ì¤€ì¼
      const start = new Date(end);
      if(period==='1week')  start.setDate(end.getDate()-7);
      if(period==='1month') start.setMonth(end.getMonth()-1);
      if(period==='3months')start.setMonth(end.getMonth()-3);
      if(period==='1year')  start.setFullYear(end.getFullYear()-1);
      return { start, end, label:`${fmtDate(start)} ~ ${fmtDate(end)}` };
    }

    function renderList(){
      const r = periodRange(filterState.period);

      let items = allTransactions
        .filter(t => new Date(`${t.date}T${t.time}`) >= r.start);

      // >>> ì¶”ê°€: êµ¬ë¶„ í•„í„°
      if (filterState.type !== 'all') {
        items = items.filter(t => t.type === filterState.type);
      }

      // ì •ë ¬
      items.sort((a,b)=> filterState.sort==='latest'
        ? new Date(`${b.date}T${b.time}`) - new Date(`${a.date}T${a.time}`)
        : new Date(`${a.date}T${a.time}`) - new Date(`${b.date}T${b.time}`));

      const typeLabels = { all:'ì „ì²´', deposit:'ì…ê¸ˆ', withdraw:'ì¶œê¸ˆ' };
      filterInfo.textContent = `${r.label} Â· ${typeLabels[filterState.type]} Â· ${filterState.sort==='latest'?'ìµœì‹ ìˆœ':'ê³¼ê±°ìˆœ'}`;

      if(items.length===0){
        txListEl.innerHTML = `<div style="padding:36px; text-align:center; color:#999;">ê±°ë˜ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤</div>`;
        return;
      }
      txListEl.innerHTML = items.map(t => `
        <div class="tx-item">
          <div class="tx-date">${t.date.replaceAll('-','.')} ${t.time}</div>
          <div class="tx-row">
            <div class="tx-name">${t.name}</div>
            <div class="tx-amount">
              <div class="tx-amt withdraw">${formatAmt(t.amount)}ì›</div>
              <div class="tx-bal">ì”ì•¡ ${t.balance}ì›</div>
            </div>
          </div>
        </div>
      `).join('');
    }

    /* ======= ë°”í…€ì‹œíŠ¸: ê¸°ê°„/ì •ë ¬/êµ¬ë¶„ ======= */
    const sheet = document.getElementById('sheet');
    const openFilterBtn = document.getElementById('openFilter');
    const closeSheetBtn = document.getElementById('closeSheet');
    const applyBtn = document.getElementById('applyFilter');

    openFilterBtn.addEventListener('click', ()=> sheet.classList.add('show'));
    closeSheetBtn.addEventListener('click', ()=> sheet.classList.remove('show'));

    // ê·¸ë£¹ë³„ ë‹¨ë… ì„ íƒ ì²˜ë¦¬
    function makeSingleSelect(selector, onSelect){
      const btns = Array.from(document.querySelectorAll(selector));
      btns.forEach(btn=>{
        btn.addEventListener('click', ()=>{
          btns.forEach(b=>b.classList.remove('selected'));
          btn.classList.add('selected');
          onSelect(btn);
        });
      });
      return btns;
    }

    makeSingleSelect('.opt-period',  (btn)=>{/* UI ì „ìš©, ì‹¤ì œ ì ìš©ì€ ì¡°íšŒ í´ë¦­ì—ì„œ */});
    makeSingleSelect('.opt-sort',    (btn)=>{/* UI ì „ìš© */});
    makeSingleSelect('.opt-type',    (btn)=>{/* UI ì „ìš© */});

    applyBtn.addEventListener('click', ()=>{
      const selPeriod = document.querySelector('.opt-period.selected')?.dataset.period || '1week';
      const selSort   = document.querySelector('.opt-sort.selected')?.dataset.sort || 'latest';
      const selType   = document.querySelector('.opt-type.selected')?.dataset.type || 'all';

      filterState.period = selPeriod;
      filterState.sort   = selSort;
      filterState.type   = selType;

      sheet.classList.remove('show');
      renderList();
    });

    // ì´ˆê¸° ë Œë”
    renderList();
  </script>
</body>
</html>
