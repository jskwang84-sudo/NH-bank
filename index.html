<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
  <title>Kbank â€“ ë°ëª¨</title>

  <!-- PWA -->
  <meta name="theme-color" content="#0c3bd9">
  <link rel="manifest" href="./manifest.json">
  <link rel="icon" sizes="192x192" href="./icon-192.png">
  <link rel="icon" sizes="512x512" href="./icon-512.png">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="apple-touch-icon" href="./icon-192.png"/>

  <style>
    :root{ --kb-blue:#0c3bd9; --kb-card:#ffffff; --kb-text:#0f172a; }
    *{box-sizing:border-box;-webkit-tap-highlight-color:transparent}
    html,body{
      margin:0;height:100%;
      color:var(--kb-text);background:#f6f7fb;
      font-family:'Noto Sans KR','Apple SD Gothic Neo',-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;
      font-variant-numeric:tabular-nums; font-feature-settings:"tnum" 1; font-synthesis:none;
      -webkit-text-size-adjust:100%; text-rendering:optimizeLegibility;
    }

    /* ===== View ì „í™˜ ===== */
    .view{position:fixed;inset:0;overflow:auto;background:var(--kb-card);transition:transform .35s ease}
    #home{transform:translateX(0)}
    #tx{transform:translateX(100%)}
    #tx.active{transform:translateX(0)}
    #home.hidden{transform:translateX(-100%)}

    /* ===== ìƒë‹¨ë°” ===== */
    .appbar{position:sticky;top:0;z-index:10;background:var(--kb-card);display:flex;align-items:center;justify-content:center;height:56px;border-bottom:1px solid #edf0f4}
    .appbar .back{position:absolute;left:8px;background:none;border:0;font-size:22px;height:56px;width:48px}
    .appbar h1{font-size:18px;margin:0}

    /* ===== í™ˆ ===== */
    .wrap{padding:14px 14px 92px}
    .banner{background:#e9f0ff;border:1px solid #dbe6ff;color:#1e3a8a;border-radius:14px;padding:14px;display:flex;align-items:center;gap:10px}
    .section-title{font-weight:800;margin:16px 4px 8px}
    .card{background:var(--kb-card);border-radius:16px;box-shadow:0 1px 6px rgba(0,0,0,.06);padding:16px}
    #acctArea{display:block;border:1px solid #eff3fb;border-radius:14px;padding:16px;cursor:pointer}
    #acctArea:active{transform:scale(.995)}
    .acct-num{color:#64748b;margin:8px 0 12px}
    .balance{font-size:30px;font-weight:900;letter-spacing:-.5px}
    .btns{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:14px}
    .btn{height:48px;border-radius:12px;border:0;font-weight:800}
    .btn.gray{background:#eef1f7;color:#111}
    .btn.blue{background:var(--kb-blue);color:#fff}
    .quick{display:flex;gap:18px;justify-content:space-between;margin-top:14px}
    .qitem{display:flex;flex-direction:column;align-items:center;gap:8px;color:#374151;font-size:12px}
    .qicon{width:48px;height:48px;border-radius:12px;background:#f0f3fb;display:flex;align-items:center;justify-content:center;font-size:20px}
    .tabs{position:fixed;left:0;right:0;bottom:0;background:var(--kb-card);border-top:1px solid #edf0f4;display:flex;justify-content:space-around;padding:8px 6px env(safe-area-inset-bottom)}
    .tab{display:flex;flex-direction:column;align-items:center;font-size:11px;color:#6b7280;gap:4px}
    .tab.active{color:var(--kb-blue)}

    /* ===== ê±°ë˜ë‚´ì—­ ===== */
    .header-box{padding:12px 16px 8px;border-bottom:1px solid #edf0f4}
    .acc-title{font-size:22px;font-weight:900;margin:6px 0 2px}
    .acc-num{font-size:14px;color:#64748b}
    .row{display:flex;align-items:center;gap:12px;margin:14px 0 6px}
    .row .btn{flex:1}
    .chips{display:flex;gap:10px;align-items:center}
    .chip{font-size:12px;color:#475569;border:1px solid #e5e7eb;border-radius:999px;padding:6px 10px;background:#fff}

    .tx-list{margin-top:8px}
    .tx-item{padding:14px 16px;border-bottom:1px solid #f0f2f7;background:#fff}

    /* ë‚ ì§œì¤„ */
    .tx-top{display:flex;justify-content:space-between;align-items:center;margin-bottom:6px;color:#9ca3af;font-size:12px}

    /* ê±°ë˜ëª…-ê¸ˆì•¡ ë¼ì¸(í•­ëª©ëª…ê³¼ ê°™ì€ ë¼ì¸) */
    .tx-row{display:flex;justify-content:space-between;align-items:baseline;margin-bottom:4px;gap:12px}
    .tx-name{font-weight:700;word-break:keep-all;line-height:1.4}

    /* ê¸ˆì•¡ = ì”ì•¡ê³¼ ë™ì¼ ì„œì²´/ì„¤ì • */
    .tx-amt{
      font-family:'Noto Sans KR','Apple SD Gothic Neo',-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;
      font-variant-numeric:tabular-nums; font-feature-settings:"tnum" 1; font-synthesis:none;
      font-size:17px; font-weight:500; line-height:1.4; text-align:right; letter-spacing:0;
    }
    .deposit{color:#2563eb}
    .withdraw{color:#d32f2f}
    .tx-bal{
      font-family:'Noto Sans KR','Apple SD Gothic Neo',-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;
      font-variant-numeric:tabular-nums; font-feature-settings:"tnum" 1; font-synthesis:none;
      color:#94a3b8;font-size:12px;text-align:right;
    }

    /* ===== ë°”í…€ì‹œíŠ¸(ì„ íƒ ìƒíƒœ í‘œì‹œ) ===== */
    .mask{position:fixed;inset:0;background:rgba(0,0,0,.35);opacity:0;pointer-events:none;transition:.2s}
    .sheet{position:fixed;left:0;right:0;bottom:-100%;background:#fff;border-top-left-radius:20px;border-top-right-radius:20px;box-shadow:0 -10px 30px rgba(0,0,0,.2);transition:bottom .25s ease;z-index:30}
    .grid-4{display:grid;grid-template-columns:repeat(4,1fr);gap:10px}
    .grid-3{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
    .grid-2{display:grid;grid-template-columns:repeat(2,1fr);gap:10px}
    .opt{padding:12px;border:1px solid #e5e7eb;border-radius:12px;background:#fff;text-align:center}
    .opt.selected{border-color:#0c3bd9;box-shadow:0 0 0 3px rgba(12,59,217,.12);font-weight:800;color:#0c3bd9}
    .confirm{margin-top:10px;width:100%;height:52px;border:0;border-radius:14px;background:#0c3bd9;color:#fff;font-weight:900}
  </style>
</head>
<body>
  <!-- ===== HOME ===== -->
  <section id="home" class="view">
    <div class="wrap">
      <div class="banner">í•œêµ­íˆ¬ìì¦ê¶Œ Â· ì§€ê¸ˆ êµ­ë‚´ ìš°ëŸ‰ì£¼ 2ì£¼ ë¿Œë¦¬ëŠ” ì¤‘!</div>

      <h3 class="section-title">Kbank</h3>
      <div class="card">
        <div id="acctArea" aria-label="ê³„ì¢Œ ìƒì„¸ ë³´ê¸°">
          <div class="acc-label" style="color:#64748b;margin-bottom:6px">MY ì…ì¶œê¸ˆí†µì¥ 100-116-054706</div>
          <div class="balance">20,300ì›</div>
        </div>
        <div class="btns">
          <button class="btn gray" id="btnGet">ê°€ì ¸ì˜¤ê¸°</button>
          <button class="btn blue" id="btnTransfer">ì´ì²´í•˜ê¸°</button>
        </div>
        <div class="quick">
          <div class="qitem"><div class="qicon">ğŸ’³</div><div>ì²´í¬ì¹´ë“œ</div></div>
          <div class="qitem"><div class="qicon">âš¡</div><div>ìë™ì¶©ì „</div></div>
          <div class="qitem"><div class="qicon">ğŸº</div><div>í”ŒëŸ¬ìŠ¤ë°•ìŠ¤</div></div>
          <div class="qitem"><div class="qicon">â­</div><div>ì…ì¶œê¸ˆë¦¬ì›Œë“œ</div></div>
        </div>
      </div>
    </div>

    <nav class="tabs">
      <div class="tab active">í™ˆ</div><div class="tab">ë°œê²¬</div><div class="tab">í˜œíƒ</div><div class="tab">íˆ¬ì</div><div class="tab">ì „ì²´</div>
    </nav>
  </section>

  <!-- ===== TX ===== -->
  <section id="tx" class="view">
    <div class="appbar">
      <button class="back" onclick="goHome()">â€¹</button>
      <h1>ì…ì¶œê¸ˆí†µì¥</h1>
    </div>

    <div class="header-box">
      <div class="acc-title">MY ì…ì¶œê¸ˆí†µì¥</div>
      <div class="acc-num">100-116-054706</div>
      <div class="row">
        <button class="btn gray">ê°€ì ¸ì˜¤ê¸°</button>
        <button class="btn blue">ì´ì²´í•˜ê¸°</button>
      </div>
      <div class="chips">
        <button id="openFilter" class="chip">3ê°œì›”Â·ì „ì²´Â·ìµœì‹ ìˆœ âŒ„</button>
      </div>
    </div>

    <div id="txList" class="tx-list"></div>
  </section>

  <!-- Filter Sheet -->
  <div id="mask" class="mask"></div>
  <div id="sheet" class="sheet" role="dialog" aria-modal="true">
    <div class="sheet-head" style="padding:16px;border-bottom:1px solid #edf0f4;font-weight:800">ì¡°íšŒ ì¡°ê±´</div>
    <div class="sheet-body" style="padding:14px 16px 22px">
      <div style="font-weight:800;margin:6px 0 8px">ê¸°ê°„</div>
      <div class="grid-4" id="periodBtns">
        <button class="opt" data-period="1m" aria-pressed="false">1ê°œì›”</button>
        <button class="opt selected" data-period="3m" aria-pressed="true">3ê°œì›”</button>
        <button class="opt" data-period="6m" aria-pressed="false">6ê°œì›”</button>
        <button class="opt" data-period="1y" aria-pressed="false">1ë…„</button>
      </div>

      <div style="font-weight:800;margin:16px 0 8px">ìœ í˜•</div>
      <div class="grid-3" id="typeBtns">
        <button class="opt selected" data-type="all" aria-pressed="true">ì „ì²´</button>
        <button class="opt" data-type="withdraw" aria-pressed="false">ì¶œê¸ˆë§Œ</button>
        <button class="opt" data-type="deposit" aria-pressed="false">ì…ê¸ˆë§Œ</button>
      </div>

      <div style="font-weight:800;margin:16px 0 8px">ìˆœì„œ</div>
      <div class="grid-2" id="sortBtns">
        <button class="opt selected" data-sort="latest" aria-pressed="true">ìµœì‹ ìˆœ</button>
        <button class="opt" data-sort="oldest" aria-pressed="false">ê³¼ê±°ìˆœ</button>
      </div>

      <div style="font-weight:800;margin:16px 0 8px">ê¸ˆì•¡</div>
      <div class="range" style="display:flex;gap:10px">
        <input id="minAmt" placeholder="ìµœì†Œ" inputmode="numeric" style="flex:1;height:44px;border:1px solid #e5e7eb;border-radius:12px;padding:0 12px">
        <input id="maxAmt" placeholder="ìµœëŒ€" inputmode="numeric" style="flex:1;height:44px;border:1px solid #e5e7eb;border-radius:12px;padding:0 12px">
      </div>

      <button id="applyFilter" class="confirm">í™•ì¸</button>
    </div>
  </div>

  <script>
    /* ===== í™”ë©´ ì „í™˜ ===== */
    const home=document.getElementById('home');
    const tx=document.getElementById('tx');
    const acctArea=document.getElementById('acctArea');
    const transferBtn=document.getElementById('btnTransfer');

    acctArea.addEventListener('click',()=>{ home.classList.add('hidden'); tx.classList.add('active'); });
    function goHome(){ tx.classList.remove('active'); home.classList.remove('hidden'); }
    transferBtn.addEventListener('click',()=>alert('ë°ëª¨: ì´ì²´ ê¸°ëŠ¥ì€ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.'));

    /* ===== ê±°ë˜ ë°ì´í„° ===== */
    const data = [ ... ë™ì¼ ... ];

    /* ===== í•„í„° ìƒíƒœ/ë Œë” ===== */
    let state={period:'3m',type:'all',sort:'latest',min:null,max:null};
    const txList=document.getElementById('txList');
    function fmtKR(n){return Number(n).toLocaleString('ko-KR');}

    /* âœ… ë‚ ì§œ ìë™ ì—…ë°ì´íŠ¸ ë°˜ì˜ */
    function withinPeriod(d,p){
      const end = new Date(); // ì˜¤ëŠ˜ ë‚ ì§œ ìë™ ì‚¬ìš©
      end.setHours(23,59,59,999);
      const start = new Date(end);
      if(p==='1m')start.setMonth(end.getMonth()-1);
      if(p==='3m')start.setMonth(end.getMonth()-3);
      if(p==='6m')start.setMonth(end.getMonth()-6);
      if(p==='1y')start.setFullYear(end.getFullYear()-1);
      const dt=new Date(d.date+'T'+d.time);
      return dt>=start&&dt<=end;
    }

    function render(){
      let items=data.filter(d=>withinPeriod(d,state.period));
      if(state.type!=='all')items=items.filter(d=>d.type===state.type);
      if(state.min)items=items.filter(d=>Math.abs(d.amount)>=Number(state.min));
      if(state.max)items=items.filter(d=>Math.abs(d.amount)<=Number(state.max));
      items.sort((a,b)=>state.sort==='latest'
        ?new Date(b.date+'T'+b.time)-new Date(a.date+'T'+a.time)
        :new Date(a.date+'T'+a.time)-new Date(b.date+'T'+b.time));

      txList.innerHTML=items.map(d=>{
        const cls=d.type==='deposit'?'deposit':'withdraw';
        const sign=d.type==='deposit'?'+':'-';
        return `
          <div class="tx-item">
            <div class="tx-top">${d.date} | ${d.time}</div>
            <div class="tx-row">
              <div class="tx-name">${d.name}</div>
              <div class="tx-amt ${cls}">${sign}${fmtKR(d.amount)}ì›</div>
            </div>
            <div class="tx-bal">ì”ì•¡ ${fmtKR(d.balance)} ì›</div>
          </div>
        `;
      }).join('');
    }
    render();

    /* ===== ë°”í…€ì‹œíŠ¸ ===== */
    const mask=document.getElementById('mask');
    const sheet=document.getElementById('sheet');
    const openFilter=document.getElementById('openFilter');
    const applyBtn=document.getElementById('applyFilter');
    function openSheet(){mask.style.opacity=1;mask.style.pointerEvents='auto';sheet.style.bottom=0;}
    function closeSheet(){mask.style.opacity=0;mask.style.pointerEvents='none';sheet.style.bottom='-100%';}
    openFilter.addEventListener('click',openSheet); mask.addEventListener('click',closeSheet);

    function selectSingle(id,key){
      const box=document.getElementById(id);
      box.addEventListener('click',e=>{
        const btn=e.target.closest('.opt'); if(!btn) return;
        Array.from(box.querySelectorAll('.opt')).forEach(b=>{
          b.classList.remove('selected'); b.setAttribute('aria-pressed','false');
        });
        btn.classList.add('selected'); btn.setAttribute('aria-pressed','true');
        state[key]=btn.dataset[key];
      });
    }
    selectSingle('periodBtns','period'); selectSingle('typeBtns','type'); selectSingle('sortBtns','sort');

    applyBtn.addEventListener('click',()=>{
      state.min=document.getElementById('minAmt').value.trim();
      state.max=document.getElementById('maxAmt').value.trim();
      const p={'1m':'1ê°œì›”','3m':'3ê°œì›”','6
